@page "/calc"
@using Gcalc.App.Components.Math

<PageTitle>Calculator</PageTitle>



<div style="height: 100%; display: flex; flex-direction: column; gap: 1rem">
    <div
        style="display: flex; flex-direction: column-reverse; gap: 1rem;height: calc(100% - 100px); overflow-y: scroll;padding-bottom: 1rem">

        @for (int i = 0; i < 100; i++)
        {
            <div style="margin-left: auto">

                <Equation Value="\frac{d}{dx}\left( \int_{0}^{x} f(u)\,du\right)=f(x)"/>
            </div>
            <div style="margin-right: auto">
                <Equation Value="\frac{d}{dx}\left( \int_{0}^{x} f(u)\,du\right)=f(x)"/>
            </div>
        }
    </div>
    <div
        style="height: 100px; padding-right: 1rem; display: flex; align-items: center; justify-content: center;flex-direction: row">
        <FluentTextArea style="width: 50%; margin-top: -1rem" Rows="4"
                        @bind-Value="@Input"
                        @onkeydown="@(args =>
                                    {
                                        if (args.Key == "Enter")
                                            OnSubmit();
                                    })"/>
        <div
            style="width: 50%; height: 100px; border: 2px solid var(--neutral-stroke-rest); border-radius: 4px; padding: 0.5rem; margin: 0.5rem 0.5rem 1.5rem 1rem;">
            <Equation Value="@Input" TeXDisplay="true" Style="width: 100%; height: 80px;"/>
        </div>
    </div>
</div>


@code {
    private string m_Input  = string.Empty;

    public string Input
    {
        get => m_Input;
        set
        {
            m_Input = value;
            StateHasChanged();
        }
    }

    private void OnSubmit()
    {
        m_Input = "";
        StateHasChanged();
    }

}